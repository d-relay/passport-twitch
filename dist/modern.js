import t from"node-fetch";import e from"passport-oauth2";class r extends e{constructor(t,e){super(Object.assign(Object.assign({},t),{authorizationURL:"https://id.twitch.tv/oauth2/authorize",tokenURL:"https://id.twitch.tv/oauth2/token"}),e),this.name="twitch",this.clientID=t.clientID,this._oauth2.setAuthMethod("Bearer"),this._oauth2.useAuthorizationHeaderforGET(!0)}userProfile(r,i){return t("https://api.twitch.tv/helix/users",{method:"GET",headers:{"Client-ID":this.clientID,Accept:"application/vnd.twitchtv.v5+json",Authorization:"Bearer "+r}}).then(t=>{if(t.ok)return t.json();throw new e.InternalOAuthError("failed to fetch user profile",t)}).then(t=>{const e=t.data[0];return e.provider="twitch",e.display_name&&(e.displayName=e.display_name,delete e.display_name),i(null,e)}).catch(t=>i(t,null))}authenticate(t,e){super.authenticate(t,e)}authorizationParams(t){return{force_verify:"boolean"==typeof t.forceVerify&&t.forceVerify}}}const i=r;export{i as OAuth2Strategy,r as Strategy};
//# sourceMappingURL=modern.js.map
