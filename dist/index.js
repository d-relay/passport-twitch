"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("node-fetch"),t=require("passport-oauth2"),r=require("pkginfo");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=o(e),u=o(t),a=o(r);class n extends u.default{constructor(e,t){super(e,t),this.clientID=e.clientID,this._oauth2.setAuthMethod("Bearer"),this._oauth2.useAuthorizationHeaderforGET(!0)}userProfile(e,t){return i.default("https://api.twitch.tv/helix/users",{method:"GET",headers:{"Client-ID":this.clientID,Accept:"application/vnd.twitchtv.v5+json",Authorization:"Bearer "+e}}).then(e=>{if(e.ok)return e.json();throw new u.default.InternalOAuthError("failed to fetch user profile",e)}).then(e=>{const r=e.data[0];return t(null,r)}).catch(e=>t(e,null))}authorizationParams(e){return{force_verify:"boolean"!=typeof e.forceVerify&&e.forceVerify}}}a.default(module,"version");const s=n;exports.OAuth2Strategy=s,exports.Strategy=n;
//# sourceMappingURL=index.js.map
